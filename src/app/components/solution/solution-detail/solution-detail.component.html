<!--{{ $solution | async | json }}-->
<div *ngIf="($solution | async) as solution">
<div class="body d-flex py-lg-3 py-md-2"
     *ngIf="solution.title != ''">
    <div class="container-xxl">
        <div class="row align-items-center">
            <div class="border-0 mb-4">
                <div class="card-header py-3 no-bg bg-transparent d-flex align-items-center px-0 justify-content-between border-bottom flex-wrap" style="padding: 0 !important;">
                    <h3 class="fw-bold mb-0">Detalle de la solucion</h3>
                </div>
            </div>
        </div> <!-- Row end  -->
        <div class="row g-3">
            <div class="col-xxl-12 col-xl-12 col-lg-12 col-md-12">
                <div class="row g-3 mb-3">
                    <div class="col-md-4">
                        <div class="card ">
                            <div class="card-body">
                                <div class="d-flex align-items-center">
                                    <div class="avatar lg  rounded-1 no-thumbnail bg-lightyellow color-defult"><mat-icon class="icofont-optic fs-4">more</mat-icon></div>
                                    <div class="flex-fill ms-4 text-truncate">
                                        <div class="text-truncate">Estado</div>
                                        <span class="badge bg-warning">{{solution.nameStatus}}</span>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card ">
                            <div class="card-body">
                                <div class="d-flex align-items-center">
                                    <div class="avatar lg  rounded-1 no-thumbnail bg-lightblue color-defult"><mat-icon class="icofont-user fs-4">person</mat-icon></div>
                                    <div class="flex-fill ms-4 text-truncate">
                                        <div class="text-truncate">Creado por</div>
                                        <span class="fw-bold">{{ solution.technicalName}}</span>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card ">
                            <div class="card-body">
                                <div class="d-flex align-items-center">
                                    <div class="avatar lg  rounded-1 no-thumbnail bg-lightgreen color-defult"><mat-icon class="icofont-price fs-4">error</mat-icon></div>
                                    <div class="flex-fill ms-4 text-truncate">
                                        <div class="text-truncate">Prioridad</div>
                                        <span class="badge bg-danger">{{solution.priority}}</span>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div> <!-- Row end  -->
                <div class="row g-3">
                    <div class="col-md-12">
                        <div class="card mb-3">
                            <div class="card-body">
                                <h6 class="fw-bold mb-3 text-danger">{{ solution.title }}</h6>
                                <p>{{solution.summary}}</p>
                            </div>
                        </div>
                        <div class="card mb-3">
                            <div class="card-body">
                                <figure class="img-solution-container">
                                    <img style="width: 100%"
                                         [src]="solution.imageUrl"
                                         alt="{{solution.title}}">
                                </figure>
                            </div>
                        </div>
                        <div class="row g-3">
                            <div class="col-lg-6 col-md-6">
                                <div class="card">
                                    <div class="card-body">
                                        <h6 class="fw-bold mb-3 text-danger">Imagenes Adjuntas</h6>
                                        <div class="flex-grow-1">
                                            <div class="py-2 d-flex align-items-center border-bottom">
                                                <div class="d-flex ms-3 align-items-center flex-fill">
                                                    <span class="avatar lg light-danger-bg rounded-circle text-center d-flex align-items-center justify-content-center"><mat-icon class="icofont-bug fs-5">image</mat-icon></span>
                                                    <div class="d-flex flex-column ps-3">
                                                        <h6 class="fw-bold mb-0 small-14">Image3.jpg</h6>
                                                    </div>
                                                </div>
                                                <button type="button" class="btn light-danger-bg text-end">Descargar</button>
                                            </div>
                                            <div class="py-2 d-flex align-items-center border-bottom">
                                                <div class="d-flex ms-3 align-items-center flex-fill">
                                                    <span class="avatar lg light-danger-bg rounded-circle text-center d-flex align-items-center justify-content-center"><mat-icon class="icofont-bug fs-5">image</mat-icon></span>
                                                    <div class="d-flex flex-column ps-3">
                                                        <h6 class="fw-bold mb-0 small-14">Image4.jpg</h6>
                                                    </div>
                                                </div>
                                                <button type="button" class="btn light-danger-bg text-end">Descargar</button>
                                            </div>

                                        </div>
                                    </div>
                                </div>

                            </div>
                            <div class="col-lg-6 col-md-6">
                                <div class="card">
                                    <div class="card-body">
                                        <h6 class="fw-bold mb-3 text-danger">Archivos adjuntos</h6>
                                        <div class="flex-grow-1">
                                            <div class="py-2 d-flex align-items-center border-bottom">
                                                <div class="d-flex ms-3 align-items-center flex-fill">
                                                    <span class="avatar lg bg-lightgreen rounded-circle text-center d-flex align-items-center justify-content-center"><mat-icon class="icofont-file-pdf fs-5">article</mat-icon></span>
                                                    <div class="d-flex flex-column ps-3">
                                                        <h6 class="fw-bold mb-0 small-14">file1.pdf</h6>
                                                    </div>
                                                </div>
                                                <button type="button" class="btn bg-lightgreen text-end">Descargar</button>
                                            </div>
                                            <div class="py-2 d-flex align-items-center border-bottom">
                                                <div class="d-flex ms-3 align-items-center flex-fill">
                                                    <span class="avatar lg bg-lightgreen rounded-circle text-center d-flex align-items-center justify-content-center"><mat-icon class="icofont-file-pdf fs-5">article</mat-icon></span>
                                                    <div class="d-flex flex-column ps-3">
                                                        <h6 class="fw-bold mb-0 small-14">file2.pdf</h6>
                                                    </div>
                                                </div>
                                                <button type="button" class="btn bg-lightgreen text-end">Descargar</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div> <!-- Row end  -->
            </div>
            <div class="col-xxl-12 col-xl-12 col-lg-12 col-md-12">
                <div class="card">
                    <div class="card-body card-body-height py-4">
                        <div class="row">
                            <div class="col-lg-12 col-md-12">
                                <h6 class="mb-0 fw-bold mb-3">Recomendaciones</h6>
                                <div class="card mb-2">
                                    <div class="card-body">
                                        <div class="post">
                                            <form class="form" [formGroup]="recommendationFormGroup" (submit)="recommendSolution()">
                                                <mat-form-field class="full-width" appearance="outline">
                                                <textarea class="form-control"
                                                          type="text"
                                                          formControlName="description"
                                                          placeholder="Escribe tu recomendacion" rows="4" matInput></textarea>
                                                </mat-form-field>
                                                <div class="py-3">
                                                 <!--   <a href="#" class="px-3 " title="upload images"><mat-icon class="icofont-ui-camera">camera</mat-icon></a>-->
                                                    <button  [disabled]="recommendationFormGroup.invalid" class="btn btn-primary float-sm-end  mt-2 mt-sm-0"  type="submit">Enviar</button>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div> <!-- .Card End -->
                               <!-- {{ solution.recommendations | json }}-->
                                <ul class="list-unstyled res-set">
                                    <li class="card mb-2" *ngFor="let recommendation of solution.recommendations">
                                        <div class="card-body">
                                            <div class="d-flex mb-3 pb-3 border-bottom">
                                                <img class="avatar rounded-circle" src="assets/img/xs/avatar1.jpg" alt="">
                                                <div class="flex-fill ms-3 text-truncate">
                                                    <h6 class="mb-0"><span>{{recommendation.tecnicoName}}</span></h6>
                                                    <span class="text-muted">{{ recommendation.created_at}}</span>
                                                </div>
                                            </div>
                                            <div class="timeline-item-post">
                                                <h6>{{recommendation.solutionTitle}}</h6>
                                                <p>{{recommendation.description}}</p>
                                                <!--{{recommendation.comments | json}}-->
                                                <div class="mb-2 mt-4" (click)="openComments(showComments, $event)">
                                                    <a class="me-lg-4 me-2 text-primary" style="cursor: pointer"><i class="icofont-speech-comments" ></i> Comentarios ({{ recommendation.comments.length}})</a>
                                                </div>
                                                <div *ngIf="showComments">
                                                    <div class="d-flex mt-3 pt-3 border-top" *ngFor="let comment of recommendation.comments">
                                                        <img class="avatar rounded-circle" src="assets/img/xs/avatar2.jpg" alt="">
                                                        <div class="flex-fill ms-3 text-truncate">
                                                            <p class="mb-0"><span>{{comment.tecnicoName}}</span> <small class="msg-time">{{comment.createdAt}} </small></p>
                                                            <span class="text-muted">{{comment.description}}</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="mt-4">
                                                <form class="form" [formGroup]="commentFormGroup" (keydown.enter)="submitComment(recommendation.id)">
                                                <textarea
                                                        class="form-control"
                                                        type="text"
                                                        formControlName="description"
                                                        placeholder="Escribe tu comentario" rows="4"
                                                        matInput
                                                ></textarea>
                                                </form>
                                            </div>
                                        </div>
                                    </li> <!-- .Card End -->
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div >
<div *ngIf="solution.title == '' || solution?.title == null" style="position: relative;
    width: 100%;
    height: 50vh;">
    <div class="circle circle--inner">
        <div class="four four--1">4</div>
        <div class="four four--2">4</div>
        <div class="circle oh">
            <div class="astronaut">
                <div class="astronaut-backpack"></div>
                <div class="astronaut-head"></div>
                <div class="astronaut-antena antena--left">
                    <div class="ear-down"></div>
                    <div class="ear-up"></div>
                    <div class="antena"></div>
                    <div class="antena-tip"></div>
                </div>
                <div class="astronaut-antena antena--right">
                    <div class="ear-down"></div>
                    <div class="ear-up"></div>
                    <div class="antena"></div>
                    <div class="antena-tip"></div>
                </div>
                <div class="astronaut-helmet">
                    <div class="astronaut-glass"></div>
                    <div class="glow glow--1"></div>
                    <div class="glow glow--2"></div>
                </div>
                <div class="astronaut-body"></div>
            </div>
            <svg class="astronaut-wire" viewBox="-9 -9 259 823" width="259" height="823">
                <path d="M241 0c-24 54-30 113-78 148S63 159 27 215c-35 55 32 102 73 141s103 94 98 166c-6 97-169 66-192 157-10 43-8 84 9 126" fill="none" stroke-width="6" stroke="#FFF"></path>
            </svg>
            <div class="circle planet">
                <div class="craters">
                    <div class="crater crater--1"></div>
                    <div class="crater crater--2"></div>
                    <div class="crater crater--3"></div>
                    <div class="crater crater--4"></div>
                    <div class="crater crater--5"></div>
                    <div class="crater crater--6"></div>
                </div>
            </div>
            <div class="astronaut-hands">
                <div class="astronaut-hand hand--left">
                    <svg width="35" height="75">
                        <path d="M30.23 17.209c-7.925 5.118-11.657 12.786-11.226 22.975-7.113.934-12.948 4.345-18.44 5.117C-1.951 26.539 3.92 9.346 18.635 1.369 30.66-4.39 39.53 9.398 30.23 17.209z" fill="#D2D2D2"></path>
                        <g fill="none" stroke="#999" stroke-linecap="round">
                            <path d="M11.78 6.977c7.983.129 13.547 3.968 16.308 11.111M4.67 17.161c7.307-.379 13.1 1.924 17.93 6.94"></path>
                            <path d="M.816 31.334c6.439-2.441 12.295-1.746 18.149 2.488" stroke-linejoin="round"></path>
                        </g>
                        <g fill="#fff">
                            <path d="M7.721 37.171c5.875-1.994 12.264 1.156 14.258 7.031l1.218 3.588c1.995 5.875-1.156 12.264-7.03 14.258-5.875 1.995-12.264-1.156-14.259-7.031L.69 51.429c-1.994-5.875 1.156-12.263 7.031-14.258z"></path>
                            <path d="M7.829 38.159c5.794-1.967 12.094 1.14 14.061 6.934l5.044 14.855c1.967 5.794-1.14 12.095-6.934 14.062-5.794 1.967-12.095-1.14-14.062-6.934L.895 52.221c-1.967-5.794 1.14-12.095 6.934-14.062z"></path>
                            <path d="M16.863 39.472l12.879 7.384a3.876 3.876 0 0 1 1.433 5.287 3.875 3.875 0 0 1-5.286 1.433l-12.878-7.384a3.874 3.874 0 0 1-1.434-5.286 3.874 3.874 0 0 1 5.286-1.434z"></path>
                        </g>
                    </svg>
                </div>
                <div class="astronaut-hand hand--right">
                    <svg width="35" height="75">
                        <path d="M30.23 17.209c-7.925 5.118-11.657 12.786-11.226 22.975-7.113.934-12.948 4.345-18.44 5.117C-1.951 26.539 3.92 9.346 18.635 1.369 30.66-4.39 39.53 9.398 30.23 17.209z" fill="#D2D2D2"></path>
                        <g fill="none" stroke="#999" stroke-linecap="round">
                            <path d="M11.78 6.977c7.983.129 13.547 3.968 16.308 11.111M4.67 17.161c7.307-.379 13.1 1.924 17.93 6.94"></path>
                            <path d="M.816 31.334c6.439-2.441 12.295-1.746 18.149 2.488" stroke-linejoin="round"></path>
                        </g>
                        <g fill="#fff">
                            <path d="M7.721 37.171c5.875-1.994 12.264 1.156 14.258 7.031l1.218 3.588c1.995 5.875-1.156 12.264-7.03 14.258-5.875 1.995-12.264-1.156-14.259-7.031L.69 51.429c-1.994-5.875 1.156-12.263 7.031-14.258z"></path>
                            <path d="M7.829 38.159c5.794-1.967 12.094 1.14 14.061 6.934l5.044 14.855c1.967 5.794-1.14 12.095-6.934 14.062-5.794 1.967-12.095-1.14-14.062-6.934L.895 52.221c-1.967-5.794 1.14-12.095 6.934-14.062z"></path>
                            <path d="M16.863 39.472l12.879 7.384a3.876 3.876 0 0 1 1.433 5.287 3.875 3.875 0 0 1-5.286 1.433l-12.878-7.384a3.874 3.874 0 0 1-1.434-5.286 3.874 3.874 0 0 1 5.286-1.434z"></path>
                        </g>
                    </svg>
                </div>
            </div>
        </div>
        <div class="button">Oops! No se encontraron resultados</div>
    </div>
</div>
</div>